# 图像采样程序

本项目通过使用 SIFT 特征提取和图像特征匹配的方式，从指定文件夹中的图像集合中采样，尽可能去除重复区域的图像。程序特别适用于沿线性轨迹进行的图像处理。

---

## 功能

1. 使用 SIFT 特征提取算法检测图像关键点和描述符。
2. 通过 BFMatcher 进行特征点匹配，计算图像之间的重叠得分。
3. 根据用户设定的重叠阈值，筛选出具有较低重叠区域的图像集合。
4. 输出采样后的图像文件名集合。

---

## 使用方法

### 环境依赖

请确保已安装以下依赖项：

- Python >= 3.7
- OpenCV >= 4.4
- Numpy

可以通过以下命令安装所需依赖：

```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requiremengts.txt
```

### 文件结构

- **主程序**: `feature_main.py`
- **输入文件夹**: 包含所有待处理的 `.JPG` 图像
- **输出结果**: 终端打印采样后的文件名列表



### 运行步骤

1. 将拍摄的图像文件放入一个文件夹中（例如 `E:/Transfer/2024110503-环境/`）。

2. 修改 `config/config.yml` 文件中的文件夹路径

3. 运行程序：

   ```shell
   python feature_main.py
   ```

4. 程序会自动采样图像，并在终端输出采样结果：

   ```tex
   Image DSC_0010.JPG added to the sampled set.
   Image DSC_0011.JPG skipped due to high overlap.
   ...
   Sampled images: ['DSC_0001.JPG', 'DSC_0010.JPG', 'DSC_0025.JPG']
   ```

------

## 注意事项

1. **图像质量**：
   - 请确保输入图像分辨率适中（建议 1080p 或更高），以便特征提取算法正常工作。
   - 如果图像特征点过少，程序可能无法有效判断重叠区域。
2. **性能**：
   - 如果图像数量较多（如 >1000 张），程序运行时间可能会较长。可以通过预处理降低图像分辨率以加速处理。
3. **支持的图像格式**：
   - 程序目前仅支持 `.JPG` 格式的图像。如果需要处理其他格式，可自行扩展代码。

------

## 结果示例

假设输入文件夹中包含以下图像：

```tex
E:/Transfer/2024110503-环境/
├── DSC_0001.JPG
├── DSC_0002.JPG
├── DSC_0003.JPG
├── ...
```

运行程序后，输出采样结果：

```tex
Sampled images: ['DSC_0001.JPG', 'DSC_0010.JPG', 'DSC_0025.JPG']
```

------

## 项目扩展

1. 特征提取方法

   ：

   - 程序目前使用 `SIFT`，可以扩展为支持其他特征提取方法（如 `ORB` 或 `AKAZE`）。

2. 批量图像处理

   ：

   - 可以添加多线程支持，提高图像采样速度。

3. 更精细的重叠计算

   ：

   - 当前使用关键点数量比例计算重叠，可以扩展为基于几何变换（如 Homography）的方法以提高精度。

------

## 作者信息

联系邮箱：ftmeng@bjtu.edu.cn
版本：v1.0.0

------

## 许可证

本项目使用 MIT 许可证，详细信息请参阅 LICENSE 文件。
